package me.maskat.ArenaPVP;

import java.util.List;

import org.bukkit.Sound;
import org.bukkit.entity.Player;
import org.bukkit.plugin.java.JavaPlugin;

import me.maskat.ArenaManager.ArenaAPI.ArenaAPI;
import me.maskat.ArenaManager.ArenaPlugin.ArenaPluginManager;
import me.maskat.ArenaManager.ArenaPlugin.ArpPlayer;
import me.maskat.ArenaPVP.enums.Team;

public class Plugin extends JavaPlugin {
	public static Plugin plugin;
	
	@Override
	public void onEnable() {
		plugin = this;
		
		Event eventHandler = new Event();
		
		getServer().getPluginManager().registerEvents(eventHandler, this);
		ArenaAPI.getModelArena("MonsterEvent").getTeam(Team.MONSTERS.name());
		ArenaPluginManager.registerArenaPlugin(null, "MonsterEvent", List.of(Team.MONSTERS.name()), null);
		
		getLogger().info("Has been enabled!");
		
		for(Player player : event.getArena().getWorld().getPlayers()) {
			ArpPlayer arpPlayer = event.getArena().getPlayer(player);
			arpPlayer.sendTitle("&cCzas zagłady!", "&eWrogie moby atakują");
			arpPlayer.playSound(Sound.ENTITY_ZOMBIE_INFECT);
		}
		Task.spawnMobsTask(event.getArena(), 10*60);
	}
	
	public static Plugin getPlugin() {
		return plugin;
	}
}
