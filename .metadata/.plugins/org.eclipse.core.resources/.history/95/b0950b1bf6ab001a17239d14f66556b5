package me.maskat.ArenaManager.ArenaPlugin;

import java.util.Collection;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

import org.bukkit.entity.Player;
import org.bukkit.event.entity.PlayerDeathEvent;
import org.bukkit.inventory.ItemStack;

import me.maskat.ArenaManager.Models.ArenesModel;
import me.maskat.ArenaManager.Models.ModelArena;
import me.maskat.ArenaManager.Models.ModelArenaTeam;

public class PlayerDeathInArenaEvent {

	private Map<String, ArpTeam> teamsMap = new HashMap<>();
	
	private Player player;
	private ArpTeam playerTeam;
	private ModelArena modelArena;
	
	private boolean respawnWithoutDeathScreen = false;
	private boolean respawnPlayerInArena = false;
	
	private boolean keepInventory = false;
	private boolean keepLevel = false;
	private int droppedExp = 0;
	private List<ItemStack> drops;
	
	private boolean nextRound = false;
	private int restartRoundDelay = 2;
//	private int startRoundDelay = 5;

	public PlayerDeathInArenaEvent(Player player, ModelArena modelArena, PlayerDeathEvent e) {
		this.player = player;
		this.modelArena = modelArena;
		
		this.droppedExp = e.getDroppedExp();
		this.drops = e.getDrops();
	}
	public ArpArena getArena() {
		return modelArena.getArenaPluginInstanceArpArena();
	}
	
	public ArpTeam getTeam(String teamType) {
		return modelArena.getArenaPluginInstanceArpTeam(teamType);
	}
	public Collection<ArpTeam> getTeams() {
		return modelArena.getArenaPluginInstanceArpTeams();
	}
	
	public Player getPlayer() {
		return this.player;
	}
	
	public ArpTeam getPlayerTeam() {
		return this.playerTeam;
	}
	
	public boolean isRespawnPlayerInArena() {
		return this.respawnPlayerInArena;
	}

	public void setRespawnPlayerInArena(boolean respawnPlayerInArena) {
		this.respawnPlayerInArena = respawnPlayerInArena;
	}
	
	public ArpTeam getTeam(String teamType) {
		return this.teamsMap.get(teamType);
	}
	public Collection<ArpTeam> getTeams() {
		return this.teamsMap.values();
	}

	public boolean isRespawnWithoutDeathScreen() {
		return respawnWithoutDeathScreen;
	}
	
	public void setRespawnWithoutDeathScreen(boolean respawnWithoutDeathScreen) {
		this.respawnWithoutDeathScreen = respawnWithoutDeathScreen;
	}

	public boolean getKeepInventory() {
		return this.keepInventory;
	}

	public boolean getKeepLevel() {
		return this.keepLevel;
	}
	
	public void setKeepInventory(boolean keepInventory) {
		this.keepInventory = keepInventory;
	}
	
	public void setKeepLevel(boolean keepLevel) {
		this.keepLevel = keepLevel;
	}

	public int getDroppedExp() {
		return droppedExp;
	}
	
	public void setDroppedExp(int droppedExp) {
		this.droppedExp = droppedExp;
	}

	public List<ItemStack> getDrops() {
		return drops;
	}
	
	public void setNextRound(boolean nextRound, int restartRoundDelay) {//, int startRoundDelay) {
    	this.nextRound = nextRound;
//    	this.startRoundDelay = startRoundDelay;
	}
	
	public boolean isNextRound() {
		return this.nextRound;
	}
	
	public int getRestartRoundDelay() {
		return this.restartRoundDelay;
	}
	
//	public int getStartRoundDelay() {
//		return this.startRoundDelay;
//	}
}
